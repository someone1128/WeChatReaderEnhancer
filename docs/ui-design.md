# 公众号阅读增强插件 - UI 设计文档

## 设计理念

公众号阅读增强插件的 UI 设计遵循以下原则：

1. **简洁直观** - 提供清晰易懂的导航体验，不干扰用户阅读
2. **协调融合** - 与公众号文章页面视觉风格保持一致
3. **高效易用** - 操作简单，响应迅速，提升用户体验
4. **无障碍友好** - 考虑不同用户的使用需求

## 主要 UI 组件

### 1. 侧边栏目录面板

**位置与尺寸**:

- 固定在页面右侧
- 默认宽度 280px（可在未来版本中可调整）
- 高度与浏览器窗口高度相同，支持独立滚动

**主要元素**:

- 面板标题："文章目录"
- 目录树列表
- 最小化/展开按钮
- 设置按钮（未来版本）

**设计规格**:

- 背景色：#FFFFFF（白色），带有轻微阴影
- 字体：系统默认字体，主要文本 14px
- 边框：左侧 1px 实线边框，颜色#EAEAEA
- 内边距：顶部 12px，底部 12px，左右 16px

### 2. 目录树

**视觉层次**:

- 不同级别标题使用不同的缩进和样式区分
- H1: 左边距 0px，字体 16px，加粗
- H2: 左边距 16px，字体 15px，加粗
- H3: 左边距 32px，字体 14px，普通
- H4-H6: 左边距递增 16px，字体 13px，普通

**交互元素**:

- 折叠/展开图标：位于有子项的标题前
- 当前位置指示器：左侧彩色条或背景高亮

**状态样式**:

- 普通状态：文本颜色#333333
- 悬停状态：文本颜色#1E88E5，背景色#F5F9FF
- 活跃状态：文本颜色#1E88E5，背景色#E3F2FD，左侧指示条#1E88E5
- 折叠状态：子项隐藏，折叠图标向右
- 展开状态：子项显示，折叠图标向下

## 交互设计

### 1. 初始加载

当用户访问公众号文章页面时：

1. 插件自动扫描文章内容，识别标题层级
2. 在右侧生成目录面板，默认展开状态
3. 如果检测到的标题过多（>20 个），默认折叠第三级及以下标题

### 2. 目录导航

**点击标题项**:

1. 页面平滑滚动至对应标题位置
2. 被点击标题项变为活跃状态
3. 如果目标标题不在当前视图中，自动调整目录滚动位置以保证可见

**折叠/展开**:

1. 点击展开/折叠图标切换子项显示状态
2. 状态变化时有简单动画效果增强体验
3. 展开/折叠操作不会触发页面跳转

### 3. 滚动同步

当用户滚动文章时：

1. 当前视图中的标题自动在目录中高亮
2. 如果高亮项不在目录可视区域，自动滚动目录使其可见
3. 使用平滑过渡效果，避免突兀变化

### 4. 响应式适配

**窄屏幕适应**:

1. 当浏览器窗口宽度小于 768px 时，目录面板默认最小化
2. 提供一个小型浮动按钮允许用户展开/折叠目录
3. 展开时目录面板覆盖部分内容，带有半透明背景

**面板控制**:

1. 点击最小化按钮将目录收起为侧边小条
2. 收起状态下点击展开图标恢复完整目录
3. 记住用户最后使用的展开/折叠状态

## 视觉设计

### 颜色方案

- **主色调**: #1E88E5（蓝色，微信风格）
- **背景色**: #FFFFFF（白色）/ #F5F9FF（浅蓝，悬停）/ #E3F2FD（浅蓝，活跃）
- **文本色**: #333333（主要）/ #666666（次要）/ #1E88E5（高亮/链接）
- **边框色**: #EAEAEA（淡灰）
- **图标色**: #666666（普通）/ #1E88E5（活跃）

### 排版

- **字体系列**: 系统默认字体栈
  ```css
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
    Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  ```
- **字重变化**: 普通(400)和加粗(600)区分层级
- **行高**: 1.5 倍，确保可读性

### 图标设计

- 使用简洁的线性图标风格
- 折叠/展开: 三角形图标，指向右（折叠）或下（展开）
- 设置: 齿轮图标
- 最小化/最大化: 箭头图标

## 动效设计

- **目录项高亮**: 200ms 过渡效果
- **折叠/展开**: 150ms 展开/折叠动画
- **页面滚动**: 300ms 平滑滚动
- **面板收起/展开**: 200ms 宽度过渡

## 无障碍设计

- 所有交互元素支持键盘操作
- 目录项使用适当的 ARIA 标签
- 颜色对比度符合 WCAG AA 标准
- 支持屏幕阅读器，提供适当的角色和状态描述

## 原型与线框图

### 侧边栏目录面板（展开状态）

```
┌─────────────────────────────┐
│  文章目录               │ ╳ │
├─────────────────────────────┤
│ ● 一级标题1                 │
│  ├─ 二级标题1.1            │
│  │  ├─ 三级标题1.1.1       │
│  │  └─ 三级标题1.1.2       │
│  └─ 二级标题1.2            │
│                             │
│ ○ 一级标题2                 │
│  ├─ 二级标题2.1            │
│  └─ 二级标题2.2            │
│     ├─ 三级标题2.2.1       │
│     └─ 三级标题2.2.2       │
│                             │
└─────────────────────────────┘
```

### 侧边栏目录面板（最小化状态）

```
┌───┐
│ > │
├───┤
│   │
│ M │
│ E │
│ N │
│ U │
│   │
└───┘
```

## 未来 UI 扩展

1. **夜间模式**

   - 深色背景，浅色文本
   - 自动跟随系统设置或手动切换

2. **自定义主题**

   - 允许用户选择主题色
   - 提供多种预设主题方案

3. **更多交互选项**
   - 添加搜索功能到目录
   - 支持目录拖拽调整宽度
   - 添加书签和笔记功能
